<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
  <head>
    
    <!-- Relative Navigation -->
    
    <link rel="up" href="Conditions" />
    <link rel="prev" href="Conditions_Overview" />
    <link rel="next" href="Exception_Handling" />
    
    <!-- Absolute Navigation -->
    
    <link rel="top" href="Title" />
    <link rel="start first" href="." />
    <link rel="copyright" href="Copyrights" />
    <link rel="contents" href="Contents" />
    <link rel="glossary" href="Glossary" />
    <link rel="index" href="Index" />
    <link rel="last author" href="Colophon" />
    
    <!-- Chapters -->
    
    <link rel="chapter" title="About This Book" href="Preface" />
    <link rel="chapter" title="1 Introduction" href="Introduction" />
    <link rel="chapter" title="2 Syntax" href="Syntax" />
    <link rel="chapter" title="3 Program Structure" href="Program_Structure" />
    <link rel="chapter" title="4 Program Control" href="Program_Control" />
    <link rel="chapter" title="5 Types and Classes" href="Types_and_Classes" />
    <link rel="chapter" title="6 Functions" href="Functions" />
    <link rel="chapter" title="7 Conditions" href="Conditions" />
    <link rel="chapter" title="8 Collections" href="Collections" />
    <link rel="chapter" title="9 Sealing" href="Sealing" />
    <link rel="chapter" title="10 Macros" href="Macros" />
    <link rel="chapter" title="11 The Built-In Classes" href="Built-In_Classes" />
    <link rel="chapter" title="12 The Built-In Functions" href="Built-In_Functions" />
    <link rel="chapter" title="13 Other Built-In Objects" href="Other_Built-In_Objects" />
    <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="Built-In_Macros_and_Special_Definitions" />
    
    <!-- Appendices -->
    
    <link rel="appendix" title="A BNF" href="BNF" />
    <link rel="appendix" title="B Exported Names" href="Exported_Names" />
    
    <!-- Stylesheets -->
    
    <link rel="stylesheet" href="styles/common.css" type="text/css" />
    <link rel="stylesheet" href="styles/nav-top-fixed.css" type="text/css" media="handheld" />
    <link rel="stylesheet" href="styles/nav-left-fixed.css" type="text/css" media="screen" title="Navigation at Left" />
    <link rel="stylesheet alternate" href="styles/nav-top-fixed.css" type="text/css" media="screen" title="Navigation at Top" />

    <title>Signalers, Conditions, and Handlers &mdash; 7. Conditions &mdash; The DRM</title>
  </head>
  <body class="content">

    <div id="header">
      <div id="navigation-header">
	<div id="navigation-top">
	  <div class="background">
	    <p id="book-title">
	    <img class="book-icon" alt="" src="images/color-square-small.png" width="22" height="21" />
	    <a href="Title"><img class="book-title" alt="The Dylan Reference Manual" src="images/book-title.png" width="343" height="28" /></a>
	  </p>
	  <p id="navigation-core">
	    <a class="previous" accesskey="p" title="Previous Page" href="Conditions_Overview"><span>&larr; Previous</span></a>
	    <a class="next" accesskey="n" title="Next Page" href="Exception_Handling"><span>Next Page &rarr;</span></a>
	    <a class="up" accesskey="u" title="Chapter Start" href="Conditions"><span>Up</span></a>
	    <a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	    <a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	    <a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
	  </p>
	</div>
	</div>
	<div id="navigation-TOC">
	  <ul class="front-matter">
	    <li id="book-start"><a href="Title">Start</a></li>
	    <li><a href="Contents">Contents</a></li>
	    <li><a href="Preface">About This Book</a></li>
	  </ul>
	  <ol class="chapters">
	    <li><a href="Introduction">Introduction</a></li>
	    <li><a href="Syntax">Syntax</a></li>
	    <li><a href="Program_Structure">Program Structure</a></li>
	    <li><a href="Program_Control">Program Control</a></li>
	    <li><a href="Types_and_Classes">Types and Classes</a></li>
	    <li><a href="Functions">Functions</a></li>
	    <li class="current parent"><a href="Conditions">Conditions</a>
	      <ul class="sections">
		<li><a href="Conditions_Background">Background</a></li>
		<li><a href="Conditions_Overview">Overview</a></li>
		<li id="current"><a href="Signalers_Conditions_and_Handlers">Signalers, Conditions, and Handlers</a></li>
		<li><a href="Exception_Handling">Exception Handling</a></li>
		<li><a href="Condition_Messages">Condition Messages</a></li>
		<li><a href="Introspective_Operations_on_Conditions">Introspective Operations</a></li>
	      </ul>
	    </li>
	    <li><a href="Collections">Collections</a></li>
	    <li><a href="Sealing">Sealing</a></li>
	    <li><a href="Macros">Macros</a></li>
	    <li><a href="Built-In_Classes">The Built-In Classes</a></li>
	    <li><a href="Built-In_Functions">The Built-In Functions</a></li>
	    <li><a href="Other_Built-In_Objects">Other Built-In Objects</a></li>
	    <li><a href="Built-In_Macros_and_Special_Definitions">The Built-In Macros and Special Definitions</a></li>
	  </ol>
	  <ol class="appendices">
	    <li><a href="BNF">BNF</a></li>
	    <li><a href="Exported_Names">Exported Names</a></li>
	  </ol>
	  <ul class="back-matter">
	    <li><a href="Glossary">Glossary</a></li>
	    <li><a href="Index">Index</a></li>
	    <li><a href="Colophon">Colophon</a></li>
	  </ul>
	  <ul class="errata">
	    <li><a href="Errata">Errata</a></li>
	  </ul>
	</div>
      </div>

      <hr />

    </div>

    <div id="content">
      <div id="section-header">
	<p id="section-prefix">Chapter 7</p>
	<p id="section-name">Conditions</p>
      </div>

      <a name="HEADING-55-0"></a>
      <a name="UID-Conditions-1987"></a>
      <h1 class="section-title">Signalers, Conditions, and Handlers</h1>
      <p>A condition is an object used to locate and provide information to a handler. A condition
	represents a situation that needs to be handled. Examples
	are <a name="IX-912">errors</a>, <a name="IX-913">warnings</a>, and attempts
	to <a name="IX-914">recover</a> from errors. All conditions are instances
	of <code id="IX-915">&lt;condition&gt;</code>. Several subclasses
	of <code>&lt;condition&gt;</code> are provided for additional behavior. These are described
	in <a href="Condition_Classes#XREF-1472"><q>Conditions</q> on page 244</a>.</p>
      <p>A <a name="IX-916">handler</a> is a function for handling conditions of a particular
	type. Handlers may be installed dynamically with the local
	declaration <code id="IX-917">let handler</code>, and with
	the <code id="IX-918">exception</code> clause of the <code>block</code>
	statement. Dynamically installed handlers are active for the duration of the execution of a
	body. More recently installed handlers take precedence over less recently installed
	handlers. If no dynamically installed handler handles a condition, the generic
	function <code id="IX-919">default-handler</code> is
	called. <code>default-handler</code> has predefined methods and may also have
	program-defined methods.<a name="IX-920"></a></p>
      <p>Signaling is the mechanism for locating the most recently installed handler for a
	condition. The basic mechanism for signaling is the
	function <code id="IX-921">signal</code>. Several functions built
	on <code>signal</code> are provided for additional behavior. These are described
	in <a href="Operations_on_Conditions#XREF-1917"><q>Signaling Conditions</q> on page
	  357</a>.</p>
      <p><a name="IX-922"></a>When a condition is signaled, the condition facility locates the
	most recently installed applicable handler and calls it. An applicable handler is one that
	matches the signaled condition by type and by an optional test function associated with the
	handler. The condition system is simply a way for a signaler and a handler to be introduced
	to each other. Once they have met, they communicate through an ordinary function call. The
	condition object is the argument to that call.</p>
      <p>Like any function, the called handler either returns some values or takes a nonlocal
	exit. Either way, the handler has handled the condition, and the act of signaling is
	completed.</p>
      <p>A handler also has the option of <a name="IX-923">declining to handle the condition</a> by
	passing control to the next applicable handler. It does this by <a name="IX-924">tail
	recursively calling a next-handler</a> function which it received as an argument. The
	next-handler function calls the next most recently installed applicable handler with
	appropriate arguments. This is analogous to the next-method function used in methods of
	generic functions.</p>
      <p>(The call to next-handler is described as tail-recursive to ensure that all values returned
	by the call are returned by the handler. Not returning all the values could interfere with
	the condition's recovery protocol. A handler that really knows what it is doing could use a
	non-tail-recursive call, but anything that knows what it's doing in this situation is
	probably unmodular. Note that a handler might not know the full recovery protocol, because
	the condition might be a subtype of the handler's expected type.)</p>
      <p>Every signaled condition is handled, because the system ensures that there is always an
	applicable default handler that does not decline.</p>
      <p>If a handler handles a condition by returning (rather than by taking a nonlocal exit) the
	values it returns are returned by <code>signal</code>.</p>

    </div>

    <div id="footer">

      <hr />
      <address>The Dylan Reference Manual - 7 Apr 1998</address>
      <p id="navigation-footer">
	<a class="previous" accesskey="p" title="Previous Page" href="Conditions_Overview"><span>&larr; Previous</span></a>
	<a class="next" accesskey="n" title="Next Page" href="Exception_Handling"><span>Next Page &rarr;</span></a>
	<a class="up" accesskey="u" title="Chapter Start" href="Conditions"><span>Up</span></a>
	<a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	<a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	<a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
      </p>
      <p>Copyright Apple Computer, Inc. 1996. Apple&reg; and the Apple logo are registered
	trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
      <p>Originally generated with Harlequin WebMaker&reg;, subsequently revised.</p>
    </div>
  </body>
</html>
