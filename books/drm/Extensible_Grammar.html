<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
  <head>
    
    <!-- Relative Navigation -->
    
    <link rel="up" href="Macros" />
    <link rel="prev" href="Macros_Overview" />
    <link rel="next" href="Macro_Names" />
    
    <!-- Absolute Navigation -->
    
    <link rel="top" href="Title" />
    <link rel="start first" href="." />
    <link rel="copyright" href="Copyrights" />
    <link rel="contents" href="Contents" />
    <link rel="glossary" href="Glossary" />
    <link rel="index" href="Index" />
    <link rel="last author" href="Colophon" />
    
    <!-- Chapters -->
    
    <link rel="chapter" title="About This Book" href="Preface" />
    <link rel="chapter" title="1 Introduction" href="Introduction" />
    <link rel="chapter" title="2 Syntax" href="Syntax" />
    <link rel="chapter" title="3 Program Structure" href="Program_Structure" />
    <link rel="chapter" title="4 Program Control" href="Program_Control" />
    <link rel="chapter" title="5 Types and Classes" href="Types_and_Classes" />
    <link rel="chapter" title="6 Functions" href="Functions" />
    <link rel="chapter" title="7 Conditions" href="Conditions" />
    <link rel="chapter" title="8 Collections" href="Collections" />
    <link rel="chapter" title="9 Sealing" href="Sealing" />
    <link rel="chapter" title="10 Macros" href="Macros" />
    <link rel="chapter" title="11 The Built-In Classes" href="Built-In_Classes" />
    <link rel="chapter" title="12 The Built-In Functions" href="Built-In_Functions" />
    <link rel="chapter" title="13 Other Built-In Objects" href="Other_Built-In_Objects" />
    <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="Built-In_Macros_and_Special_Definitions" />
    
    <!-- Appendices -->
    
    <link rel="appendix" title="A BNF" href="BNF" />
    <link rel="appendix" title="B Exported Names" href="Exported_Names" />
    
    <!-- Stylesheets -->
    
    <link rel="stylesheet" href="styles/common.css" type="text/css" />
    <link rel="stylesheet" href="styles/nav-top-fixed.css" type="text/css" media="handheld" />
    <link rel="stylesheet" href="styles/nav-left-fixed.css" type="text/css" media="screen" title="Navigation at Left" />
    <link rel="stylesheet alternate" href="styles/nav-top-fixed.css" type="text/css" media="screen" title="Navigation at Top" />

    <title>Extensible Grammar &mdash; 10. Macros &mdash; The DRM</title>
  </head>
  <body class="content">

    <div id="header">
      <div id="navigation-header">
	<div id="navigation-top">
	  <div class="background">
	    <p id="book-title">
	    <img class="book-icon" alt="" src="images/color-square-small.png" width="22" height="21" />
	    <a href="Title"><img class="book-title" alt="The Dylan Reference Manual" src="images/book-title.png" width="343" height="28" /></a>
	  </p>
	  <p id="navigation-core">
	    <a class="previous" accesskey="p" title="Previous Page" href="Macros_Overview"><span>&larr; Previous</span></a>
	    <a class="next" accesskey="n" title="Next Page" href="Macro_Names"><span>Next Page &rarr;</span></a>
	    <a class="up" accesskey="u" title="Chapter Start" href="Macros"><span>Up</span></a>
	    <a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	    <a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	    <a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
	  </p>
	</div>
	</div>
	<div id="navigation-TOC">
	  <ul class="front-matter">
	    <li id="book-start"><a href="Title">Start</a></li>
	    <li><a href="Contents">Contents</a></li>
	    <li><a href="Preface">About This Book</a></li>
	  </ul>
	  <ol class="chapters">
	    <li><a href="Introduction">Introduction</a></li>
	    <li><a href="Syntax">Syntax</a></li>
	    <li><a href="Program_Structure">Program Structure</a></li>
	    <li><a href="Program_Control">Program Control</a></li>
	    <li><a href="Types_and_Classes">Types and Classes</a></li>
	    <li><a href="Functions">Functions</a></li>
	    <li><a href="Conditions">Conditions</a></li>
	    <li><a href="Collections">Collections</a></li>
	    <li><a href="Sealing">Sealing</a></li>
	    <li class="current parent"><a href="Macros">Macros</a>
	      <ul class="sections">
		<li><a href="Macros_Overview">Overview</a></li>
		<li id="current" class="subsections"><a href="Extensible_Grammar">Extensible Grammar</a>
		  <ul class="page-TOC">
		    <li><a href="#HEADING-78-2">Definition Macros</a></li>
		    <li><a href="#HEADING-78-9">Statement Macros</a></li>
		    <li><a href="#HEADING-78-13">Function Macros</a></li>
		  </ul>
		</li>
		<li><a href="Macro_Names">Macro Names</a></li>
		<li><a href="Rewrite_Rules">Rewrite Rules</a></li>
		<li><a href="Patterns">Patterns</a></li>
		<li><a href="Pattern_Variable_Constraints">Pattern Variable Constraints</a></li>
		<li><a href="Templates">Templates</a></li>
		<li><a href="Auxiliary_Rule_Sets">Auxiliary Rule Sets</a></li>
		<li><a href="Hygiene">Hygiene</a></li>
		<li><a href="Rewrite_Rule_Examples">Rewrite Rule Examples</a></li>
	      </ul>
	    </li>
	    <li><a href="Built-In_Classes">The Built-In Classes</a></li>
	    <li><a href="Built-In_Functions">The Built-In Functions</a></li>
	    <li><a href="Other_Built-In_Objects">Other Built-In Objects</a></li>
	    <li><a href="Built-In_Macros_and_Special_Definitions">The Built-In Macros and Special Definitions</a></li>
	  </ol>
	  <ol class="appendices">
	    <li><a href="BNF">BNF</a></li>
	    <li><a href="Exported_Names">Exported Names</a></li>
	  </ol>
	  <ul class="back-matter">
	    <li><a href="Glossary">Glossary</a></li>
	    <li><a href="Index">Index</a></li>
	    <li><a href="Colophon">Colophon</a></li>
	  </ul>
	  <ul class="errata">
	    <li><a href="Errata">Errata</a></li>
	  </ul>
	</div>
      </div>

      <hr />

    </div>

    <div id="content">
      <div id="section-header">
	<p id="section-prefix">Chapter 10</p>
	<p id="section-name">Macros</p>
      </div>

      <a name="HEADING-78-0"></a>
      <a name="UID-Macros-1543"></a>
      <h1 class="section-title"><a name="IX-1211">Extensible Grammar</a></h1>
      <p>There are three <a name="IX-1210">kinds of macros</a>:
	definition macros, which extend the available set of
	definitions; <a name="IX-1212">statement macros</a>, which extend the available set of
	statements; and <a name="IX-1213">function macros</a>, which syntactically resemble
	function calls but are more flexible. <a name="IX-1214">Named value references</a>
	and <a name="IX-1215">local declarations</a> cannot be macro calls. Only statements,
	function calls, and definitions are extensible.</p>
      <a name="HEADING-78-2"></a>
      <a name="UID-Macros-1546"></a>
      <h2 class="subsection-title"><a name="IX-1216">Definition Macros</a></h2>
      <p>A definition macro extends the <var>definition-macro-call</var> production of the Dylan
	phrase grammar to recognize additional constructs as valid definitions, by creating a
	new <em class="BNFCaps">define-body-word</em> that is recognized by the following grammar
	line:</p>
      <dl class="BNF">
	<dt><var>definition-macro-call:</var></dt>
	<dd><code>define</code> <i>modifiers<em><sub>opt</sub></em></i> <em class="BNFCaps">define-body-word</em> <i>body-fragment<em><sub>opt</sub></em></i> <var>definition-tail</var></dd>
      </dl>
      <p>or by creating a new <em class="BNFCaps">define-list-word</em> that is recognized by the
	following grammar line:</p>
      <dl class="BNF">
	<dt><var>definition-macro-call:</var></dt>
	<dd><code>define</code> <i>modifiers<em><sub>opt</sub></em></i> <em class="BNFCaps">define-list-word</em> <i>list-fragment<em><sub>opt</sub></em></i></dd>
      </dl>
      <p>This allows programmers to extend Dylan by defining new kinds of definitions. The syntax of
	the definition must be parseable by one of these two predefined grammar rules. The first
	handles body-style definitions like <code>define class</code>, <code>define method</code>,
	and <code>define module</code>, while the second handles list-style definitions
	like <code>define constant</code>. See <a href="BNF">Appendix A, <q>BNF,</q></a> for the
	details.</p>
      <p>The new <em class="BNFCaps">define-body-word</em>
	or <em class="BNFCaps">define-list-word</em> becomes a partially reserved word in each
	module where the macro definition is visible. In particular
	a <em class="BNFCaps">define-body-word</em> or <em class="BNFCaps">define-list-word</em>
	cannot be used as a modifier in a definition. It can still be used as a
	variable-name.<a name="IX-1217"></a></p>
      <a name="HEADING-78-9"></a>
      <a name="UID-Macros-1562"></a>
      <h2 class="subsection-title"><a name="IX-1218">Statement Macros</a></h2>
      <p>A statement macro extends the <var>statement</var> production of the Dylan phrase grammar
	to recognize additional constructs as valid statements by creating a
	new <em class="BNFCaps">begin-word</em> that is recognized by the following grammar
	line:</p>
      <dl class="BNF">
	<dt><var>statement:</var></dt>
	<dd>
	  <p><em class="BNFCaps">begin-word</em> <i>body-fragment<em><sub>opt</sub></em></i> <var>end-clause</var></p>
	</dd>
      </dl>
      <p>The new <em class="BNFCaps">begin-word</em> becomes a reserved word in each module where
	the macro definition is visible. It can only be used at the beginning and end of this new
	statement.<a name="IX-1219"></a></p>
      <a name="HEADING-78-13"></a>
      <a name="UID-Macros-1569"></a>
      <h2 class="subsection-title"><a name="IX-1220">Function Macros</a></h2>
      <p>A function macro extends the <var>function-macro-call</var> production of the Dylan phrase
	grammar to recognize additional constructs by creating a
	new <em class="BNFCaps">function-word</em> that is recognized by the following grammar
	line:</p>
      <dl class="BNF">
	<dt><var>function-macro-call:</var></dt>
	<dd>
	  <p><em class="BNFCaps">function-word</em> <code>(</code> <i>body-fragment<em><sub>opt</sub></em></i> <code>)</code></p>
	</dd>
      </dl>
      <p>In addition, a function macro can be invoked by any of the shorthand syntax constructs
	available for invoking functions. In this case, the arguments are always parsed expression
	fragments, as described on <a href="Macros_Overview#XREF-1199">page 146</a>.</p>
      <p>The new <em class="BNFCaps">function-word</em> becomes a reserved word in each module where
	the macro definition is visible. It can only be used at the beginning of a macro
	call.<a name="IX-1221"></a><a name="IX-1222"></a></p>

    </div>

    <div id="footer">

      <hr />
      <address>The Dylan Reference Manual - 7 Apr 1998</address>
      <p id="navigation-footer">
	<a class="previous" accesskey="p" title="Previous Page" href="Macros_Overview"><span>&larr; Previous</span></a>
	<a class="next" accesskey="n" title="Next Page" href="Macro_Names"><span>Next Page &rarr;</span></a>
	<a class="up" accesskey="u" title="Chapter Start" href="Macros"><span>Up</span></a>
	<a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	<a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	<a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
      </p>
      <p>Copyright Apple Computer, Inc. 1996. Apple&reg; and the Apple logo are registered
	trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
      <p>Originally generated with Harlequin WebMaker&reg;, subsequently revised.</p>
    </div>
  </body>
</html>
