<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
  <head>
    
    <!-- Relative Navigation -->
    
    <link rel="up" href="Collections" />
    <link rel="prev" href="Defining_a_New_Collection_Class" />
    <link rel="next" href="Element_Types" />
    
    <!-- Absolute Navigation -->
    
    <link rel="top" href="Title" />
    <link rel="start first" href="." />
    <link rel="copyright" href="Copyrights" />
    <link rel="contents" href="Contents" />
    <link rel="glossary" href="Glossary" />
    <link rel="index" href="Index" />
    <link rel="last author" href="Colophon" />
    
    <!-- Chapters -->
    
    <link rel="chapter" title="About This Book" href="Preface" />
    <link rel="chapter" title="1 Introduction" href="Introduction" />
    <link rel="chapter" title="2 Syntax" href="Syntax" />
    <link rel="chapter" title="3 Program Structure" href="Program_Structure" />
    <link rel="chapter" title="4 Program Control" href="Program_Control" />
    <link rel="chapter" title="5 Types and Classes" href="Types_and_Classes" />
    <link rel="chapter" title="6 Functions" href="Functions" />
    <link rel="chapter" title="7 Conditions" href="Conditions" />
    <link rel="chapter" title="8 Collections" href="Collections" />
    <link rel="chapter" title="9 Sealing" href="Sealing" />
    <link rel="chapter" title="10 Macros" href="Macros" />
    <link rel="chapter" title="11 The Built-In Classes" href="Built-In_Classes" />
    <link rel="chapter" title="12 The Built-In Functions" href="Built-In_Functions" />
    <link rel="chapter" title="13 Other Built-In Objects" href="Other_Built-In_Objects" />
    <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="Built-In_Macros_and_Special_Definitions" />
    
    <!-- Appendices -->
    
    <link rel="appendix" title="A BNF" href="BNF" />
    <link rel="appendix" title="B Exported Names" href="Exported_Names" />
    
    <!-- Stylesheets -->
    
    <link rel="stylesheet" href="styles/common.css" type="text/css" />
    <link rel="stylesheet" href="styles/nav-top-fixed.css" type="text/css" media="handheld" />
    <link rel="stylesheet" href="styles/nav-left-fixed.css" type="text/css" media="screen" title="Navigation at Left" />
    <link rel="stylesheet alternate" href="styles/nav-top-fixed.css" type="text/css" media="screen" title="Navigation at Top" />

    <title>Tables &mdash; 8. Collections &mdash; The DRM</title>
  </head>
  <body class="content">

    <div id="header">
      <div id="navigation-header">
	<div id="navigation-top">
	  <div class="background">
	    <p id="book-title">
	    <img class="book-icon" alt="" src="images/color-square-small.png" width="22" height="21" />
	    <a href="Title"><img class="book-title" alt="The Dylan Reference Manual" src="images/book-title.png" width="343" height="28" /></a>
	  </p>
	  <p id="navigation-core">
	    <a class="previous" accesskey="p" title="Previous Page" href="Defining_a_New_Collection_Class"><span>&larr; Previous</span></a>
	    <a class="next" accesskey="n" title="Next Page" href="Element_Types"><span>Next Page &rarr;</span></a>
	    <a class="up" accesskey="u" title="Chapter Start" href="Collections"><span>Up</span></a>
	    <a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	    <a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	    <a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
	  </p>
	</div>
	</div>
	<div id="navigation-TOC">
	  <ul class="front-matter">
	    <li id="book-start"><a href="Title">Start</a></li>
	    <li><a href="Contents">Contents</a></li>
	    <li><a href="Preface">About This Book</a></li>
	  </ul>
	  <ol class="chapters">
	    <li><a href="Introduction">Introduction</a></li>
	    <li><a href="Syntax">Syntax</a></li>
	    <li><a href="Program_Structure">Program Structure</a></li>
	    <li><a href="Program_Control">Program Control</a></li>
	    <li><a href="Types_and_Classes">Types and Classes</a></li>
	    <li><a href="Functions">Functions</a></li>
	    <li><a href="Conditions">Conditions</a></li>
	    <li class="current parent"><a href="Collections">Collections</a>
	      <ul class="sections">
		<li><a href="Collections_Overview">Overview</a></li>
		<li><a href="Collection_Keys">Collection Keys</a></li>
		<li><a href="Iteration_Stability_and_Natural_Order">Iteration Stability and Natural Order</a></li>
		<li><a href="Mutability">Mutability</a></li>
		<li><a href="Collection_Alteration_and_Allocation">Collection Alteration and Allocation</a></li>
		<li><a href="Collection_Alignment">Collection Alignment</a></li>
		<li><a href="Defining_a_New_Collection_Class">Defining a New Collection Class</a></li>
		<li id="current"><a href="Tables">Tables</a></li>
		<li><a href="Element_Types">Element Types</a></li>
		<li><a href="Limited_Collection_Types">Limited Collection Types</a></li>
	      </ul>
	    </li>
	    <li><a href="Sealing">Sealing</a></li>
	    <li><a href="Macros">Macros</a></li>
	    <li><a href="Built-In_Classes">The Built-In Classes</a></li>
	    <li><a href="Built-In_Functions">The Built-In Functions</a></li>
	    <li><a href="Other_Built-In_Objects">Other Built-In Objects</a></li>
	    <li><a href="Built-In_Macros_and_Special_Definitions">The Built-In Macros and Special Definitions</a></li>
	  </ol>
	  <ol class="appendices">
	    <li><a href="BNF">BNF</a></li>
	    <li><a href="Exported_Names">Exported Names</a></li>
	  </ol>
	  <ul class="back-matter">
	    <li><a href="Glossary">Glossary</a></li>
	    <li><a href="Index">Index</a></li>
	    <li><a href="Colophon">Colophon</a></li>
	  </ul>
	  <ul class="errata">
	    <li><a href="Errata">Errata</a></li>
	  </ul>
	</div>
      </div>

      <hr />

    </div>

    <div id="content">
      <div id="section-header">
	<p id="section-prefix">Chapter 8</p>
	<p id="section-name">Collections</p>
      </div>

      <a name="HEADING-67-0"></a>
      <a name="UID-Collections-2785"></a>
      <h1 class="section-title"><a name="XREF-1036"></a><a name="IX-1037">Tables</a></h1>
      <p>Tables map arbitrary keys to elements. Table keys may be any object, including complex
	objects such as strings. All tables are instances
	of <code id="IX-1038">&lt;table&gt;</code>. <code>&lt;table&gt;</code> is the only
	instantiable subclass of <code>&lt;explicit-key-collection&gt;</code> defined by
	Dylan. Tables are unstable under iteration.</p>
      <p>The <a name="IX-1039">iteration protocol for tables</a> is implemented in terms of the
	function <code id="IX-1040">table-protocol</code>. Every concrete subclass
	of <code>&lt;table&gt;</code> must provide or inherit a method
	for <code>table-protocol</code>. This function accepts a table as an argument, and returns
	an equivalence predicate and hash-function, as described below.</p>
      <p>The <dfn id="IX-1041">equivalence predicate</dfn> of a table is used to compare keys. (It
	is the table's <a name="IX-1042">key test</a>.) The table maps keys that are equivalent
	under the predicate to the same table element. An equivalence predicate is a boolean
	function of two arguments that returns true if and only if the arguments are considered to
	be the same according to some specified criteria. For a function to be used as an
	equivalence predicate, it must be reflexive, commutative, and transitive. That is, for a
	function <var>F</var> and any arguments <var>X</var>, <var>Y</var>, and <var>Z</var> in the
	domain of <var>F</var>, the following must be true:</p>
      <ul>
	<li><var>F</var><code>(<var>X</var>,<var>X</var>)</code> must be true.</li>
	<li><var>F</var><code>(<var>X</var>,<var>Y</var>)</code> must be true if and only
	  if <var>F</var><code>(<var>Y</var>,<var>X</var>)</code> is true.</li>
	<li>If both <var>F</var><code>(<var>X</var>,<var>Y</var>)</code>
	  and <var>F</var><code>(<var>Y</var>,<var>Z</var>)</code> are true
	  then <var>F</var><code>(<var>X</var>,<var>Z</var>)</code> must be true.</li>
      </ul>
      <p>An <dfn id="IX-1043">equivalence class</dfn> (for an equivalence predicate) is a set
	of objects, or potential objects, that are all the same under the specified equivalence
	predicate and different from all objects not in the class. (This use of the
	term <q>class</q> does not refer to Dylan classes.)</p>
      <p>An object is said to be <dfn id="IX-1044">visibly modified</dfn> with respect to an
	equivalence predicate if the modification changes the equivalence class of the object. The
	modifications that are visible to an equivalence predicate are determined by the definition
	of the predicate. (For example, changing a character in a string would be a visible
	modification with respect to an equivalence predicate that compared strings character by
	character, but it would not be a visible modification with respect to an equivalence
	predicate that compared objects by identity, without regard for their contents.)</p>
      <p>If an object <var>X</var> is a key in a table <var>T</var> and is visibly modified with
	regard to the test function of <var>T</var>, then the consequences are unspecified if any of
	the following objects are used as a key in any subsequent operations on <var>T</var>:</p>
      <ul>
	<li>The original object, <var>X</var>.</li>
	<li>Some object <var>Y</var> that is in the same equivalence class (as determined by the
	  test function) as <var>X</var> prior to the modification of <var>X</var>.</li>
	<li>Some object <var>Z</var> that is in the same equivalence class (as determined by the
	  test function) as <var>X</var> after the modification of <var>X</var>.</li>
      </ul>
      <p>Each table also has an associated <dfn id="IX-1045">hash function</dfn>, which is a
	function that relates table keys and table elements by
	computing <dfn id="IX-1046">hash codes</dfn>. A hash code is a conceptual object
	consisting of a <dfn id="IX-1047">hash id</dfn> and its
	associated <dfn id="IX-1048">hash state</dfn>. (It is not an actual Dylan object.) A
	hash id is an integer encoding of an object. A hash state is an object of
	implementation-dependent type that is associated with a particular hash id and can be used
	by the implementation to determine whether the hash id has been invalidated. A hash function
	accepts one argument, a key, and returns two values, a hash id and a hash state, which
	together represent the hash code.</p>
      <p>Each hash function is associated with a specific equivalence predicate, and must obey the
	following constraints:</p>
      <ul>
	<li>The domain of the hash function must include the domain of valid arguments to the
	  corresponding equivalence predicate. A hash function need not be defined for all Dylan
	  objects, only those that are acceptable as arguments to the equivalence predicate.</li>
	<li><a name="XREF-1049"></a>All objects in a given equivalence class have the same
	  (<code>=</code>) valid hash id, where validity is determined from the associated hash
	  state.</li>
      </ul>
      <p>In addition, a hash function should have the property that the hash ids computed by it are
	well distributed over the range of possible values. That is, it should be unlikely that two
	randomly chosen equivalence classes have the same valid hash
	id.<a name="IX-1050"></a></p>

    </div>

    <div id="footer">

      <hr />
      <address>The Dylan Reference Manual - 7 Apr 1998</address>
      <p id="navigation-footer">
	<a class="previous" accesskey="p" title="Previous Page" href="Defining_a_New_Collection_Class"><span>&larr; Previous</span></a>
	<a class="next" accesskey="n" title="Next Page" href="Element_Types"><span>Next Page &rarr;</span></a>
	<a class="up" accesskey="u" title="Chapter Start" href="Collections"><span>Up</span></a>
	<a class="start" accesskey="s" title="Start of Book" href="Title"><span>Start</span></a>
	<a class="contents" accesskey="c" title="Contents" href="Contents"><span>Contents</span></a>
	<a class="index" accesskey="i" title="Index" href="Index"><span>Index</span></a>
      </p>
      <p>Copyright Apple Computer, Inc. 1996. Apple&reg; and the Apple logo are registered
	trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
      <p>Originally generated with Harlequin WebMaker&reg;, subsequently revised.</p>
    </div>
  </body>
</html>
